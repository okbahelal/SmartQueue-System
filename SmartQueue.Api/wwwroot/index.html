<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<title>نظام حجز الدور</title>
<style>
body {
    font-family: Arial;
    text-align: center;
    background: #f5f5f5;
    padding: 40px;
}
h1 {
    font-size: 40px;
}
button {
    padding: 20px 40px;
    font-size: 22px;
    margin: 10px;
    border-radius: 12px;
    border: none;
    cursor: pointer;
}
.service {
    background: #2d89ef;
    color: white;
}
.card {
    margin-top: 30px;
    padding: 30px;
    background: white;
    border-radius: 20px;
    display: inline-block;
}
.ticket-number {
    font-size: 70px;
    font-weight: bold;
    margin: 10px 0;
}
</style>
</head>
<body>

<h1>نظام حجز الدور</h1>
<p>اختر الخدمة</p>

<div>
    <button class="service" onclick="takeTicket('إيداع')">إيداع</button>
    <button class="service" onclick="takeTicket('سحب')">سحب</button>
    <button class="service" onclick="takeTicket('فتح حساب')">فتح حساب</button>
    <button class="service" onclick="takeTicket('استفسار')">استفسار</button>
</div>

<div id="result"></div>

<script>
async function takeTicket(serviceName) {
    const res = await fetch(`/api/Tickets?serviceName=${encodeURIComponent(serviceName)}`, {
        method: 'POST'
    });

    const data = await res.json();

    document.getElementById('result').innerHTML = `
        <div class="card">
            <div>رقم دورك</div>
            <div class="ticket-number">${data.displayNumber ?? data.id}</div>
            <div>الخدمة: ${data.serviceName}</div>
        </div>
    `;
}
</script>

</body>
</html>
